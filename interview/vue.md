# vue

## 为什么 v-for 需要添加 key 属性，其它元素为什么不需要添加？

key 属性是 Vue 在 Diff 过程中判断是否是同一元素的重要依据之一，如果是同一元素那么 Vue 会直接复用 DOM 对象，因此需要提供正确的 key 属性来保证渲染的正确性。
不仅是 v-for 作用的标签需要提供 key 属性，类似于 v-if 作用的非稳定元素也需要提供 key 属性，但是我们日常开发中都是通过模板语法编写单文件组件，在模板编译的过程中，自动的在需要的标签上加上了 key 属性。

为什么不能将 index 指定为 key 属性？因为不正确。

## Vue 中的模板编译帮我们做了哪些优化？

+ 将动态节点扁平化收集，使得在 runtime 环境中从完全树结构 Diff 到多个平级 Diff。
+ (hoistStatic) 将非动态节点的 VNode 创建使用一个常量保存，这样在多次调用 render 时，不用重复创建相同对象。
+ (cacheHandlers) 缓存事件处理函数，在多次调用 render 时，不用重复创建函数。

## Vue 中的 Diff 算法


